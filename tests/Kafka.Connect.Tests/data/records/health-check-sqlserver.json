{
  "title": "SqlServer - health checks",
  "properties": {
    "target": "SqlServer",
    "topic": "-",
    "database": "kafka_connect_db",
    "schema": "dbo",
    "table": "health_table"
  },
  "records": [
    {
      "operation": "setup",
      "script": "USE kafka_connect_db; IF NOT EXISTS (SELECT * FROM sysobjects WHERE name='health_table' AND xtype='U') CREATE TABLE [dbo].[health_table]([userId] NVARCHAR(255), [userName] NVARCHAR(255), [email] NVARCHAR(255), [timestamp] NVARCHAR(255), [action] NVARCHAR(255));"
    },
    {
      "operation": "insert",
      "key": null,
      "value": {
        "userId": "user-001",
        "userName": "John Doe",
        "email": "john.doe@example.com",
        "timestamp": "2024-01-15T10:30:00Z",
        "action": "CREATE"
      }
    },
    {
      "operation": "search",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "userId": "user-001",
        "userName": "John Doe",
        "email": "john.doe@example.com",
        "timestamp": "2024-01-15T10:30:00Z",
        "action": "CREATE"
      }
    },
    {
      "operation": "update",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "userId": "user-001",
        "userName": "John Does",
        "email": "john.does@example.com",
        "timestamp": "2025-01-15T10:30:00Z",
        "action": "UPDATE"
      }
    },
    {
      "operation": "search",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "userId": "user-001",
        "userName": "John Does",
        "email": "john.does@example.com",
        "timestamp": "2025-01-15T10:30:00Z",
        "action": "UPDATE"
      }
    },
    {
      "operation": "delete",
      "key": {
        "userId": "user-001"
      },
      "value": null
    },
    {
      "operation": "search",
      "key": {
        "userId": "user-001"
      },
      "value": null
    },
    {
      "operation": "cleanup",
      "script": "IF EXISTS (SELECT * FROM sysobjects WHERE name='health_table' AND xtype='U') DROP TABLE [dbo].[health_table];"
    }
  ]
}