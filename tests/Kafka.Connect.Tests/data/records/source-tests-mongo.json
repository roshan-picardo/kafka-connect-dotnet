{
  "title": "MongoDB - source tests",
  "properties": {
    "topic": "mongodb-source-data-topic",
    "database": "kafka_connect_db",
    "collection": "source_collection"
  },
  "records": [
    {
      "operation": "setup",
      "script": "db.source_collection.drop();"
    },
    {
      "operation": "insert",
      "key": null,
      "value": {
        "userId": "user-001",
        "userName": "John Doe",
        "email": "john.doe@example.com",
        "timestamp": "2024-01-15T10:30:00Z",
        "action": "CREATE"
      }
    },
    {
      "operation": "consume",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "id": "*",
        "operation": "CHANGE",
        "timestamp": "*",
        "after": {
          "userId": "user-001",
          "userName": "John Doe",
          "email": "john.doe@example.com",
          "timestamp": "2024-01-15T10:30:00Z",
          "action": "CREATE"
        }
      }
    },
    {
      "operation": "insert",
      "key": null,
      "value": {
        "userId": "user-002",
        "userName": "Jane Smith",
        "email": "jane.smith@example.com",
        "timestamp": "2024-01-15T10:31:00Z",
        "action": "CREATE"
      }
    },
    {
      "operation": "consume",
      "key": {
        "userId": "user-002"
      },
      "value": {
        "id": "*",
        "operation": "CHANGE",
        "timestamp": "*",
        "after": {
          "userId": "user-002",
          "userName": "Jane Smith",
          "email": "jane.smith@example.com",
          "timestamp": "2024-01-15T10:31:00Z",
          "action": "CREATE"
        }
      }
    },
    {
      "operation": "update",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "userName": "John Smith",
        "email": "john.smith@example.com",
        "timestamp": "2024-01-15T10:32:00Z",
        "action": "UPDATE"
      }
    },
    {
      "operation": "consume",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "id": "*",
        "operation": "CHANGE",
        "timestamp": "*",
        "after": {
          "userId": "user-001",
          "userName": "John Smith",
          "email": "john.smith@example.com",
          "timestamp": "2024-01-15T10:32:00Z",
          "action": "UPDATE"
        }
      }
    },
    {
      "operation": "cleanup",
      "script": "db.source_collection.drop();"
    }
  ]
}
