{
  "title": "Oracle - source tests",
  "properties": {
    "topic": "oracle-source-data-topic",
    "database": "XE",
    "schema": "\"SYSTEM\"",
    "table": "\"source_table\""
  },
  "records": [
    {
      "operation": "insert",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "userId": "user-001",
        "userName": "John Doe",
        "email": "john.doe@example.com",
        "timestamp": "2024-01-15T10:30:00Z",
        "action": "CREATE"
      }
    },
    {
      "operation": "consume",
      "delay": 2000,
      "key": {
        "userId": "user-001"
      },
      "value": {
        "id": 1,
        "operation": "INSERT",
        "timestamp": "*",
        "before": {},
        "after": {
          "userId": "user-001",
          "userName": "John Doe",
          "email": "john.doe@example.com",
          "timestamp": "2024-01-15T10:30:00Z",
          "action": "CREATE"
        }
      }
    },
    {
      "operation": "update",
      "key": {
        "userId": "user-001"
      },
      "value": {
        "userId": "user-001",
        "userName": "John Smith",
        "email": "john.smith@example.com",
        "timestamp": "2024-01-15T10:31:00Z",
        "action": "UPDATE"
      }
    },
    {
      "operation": "consume",
      "delay": 2000,
      "key": {
        "userId": "user-001"
      },
      "value": {
        "id": 2,
        "operation": "UPDATE",
        "timestamp": "*",
        "before": {
          "userId": "user-001",
          "userName": "John Doe",
          "email": "john.doe@example.com",
          "timestamp": "2024-01-15T10:30:00Z",
          "action": "CREATE"
        },
        "after": {
          "userId": "user-001",
          "userName": "John Smith",
          "email": "john.smith@example.com",
          "timestamp": "2024-01-15T10:31:00Z",
          "action": "UPDATE"
        }
      }
    },
    {
      "operation": "delete",
      "key": {
        "userId": "user-001"
      }
    },
    {
      "operation": "consume",
      "delay": 2000,
      "key": {
        "userId": "user-001"
      },
      "value": {
        "id": 3,
        "operation": "DELETE",
        "timestamp": "*",
        "before": {
          "userId": "user-001",
          "userName": "John Smith",
          "email": "john.smith@example.com",
          "timestamp": "2024-01-15T10:31:00Z",
          "action": "UPDATE"
        },
        "after": {}
      }
    },
    {
      "operation": "cleanup",
      "script": "BEGIN EXECUTE IMMEDIATE 'DROP TABLE \"SYSTEM\".\"source_table\"'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;"
    }
  ]
}
