{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "override": {
        "System": "Warning",
        "Microsoft": "Warning",
        "Microsoft.Hosting.Lifetime": "Information",
        "Kafka.Connect.Plugin.Logging.ConnectLog": "Information"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "/app/logs/kafka-connect-.log",
          "rollingInterval": "Day",
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog"
        }
      }
    ],
    "Enrich": [
      "FromLogContext"
    ]
  },
  "AllowedHosts": "*",
  "urls": "http://+:6000",
  "worker": {
    "allowAutoCreateTopics": true,
    "bootstrapServers": "broker:29092",
    "securityProtocol": "PlainText",
    "enableAutoCommit": true,
    "enableAutoOffsetStore": false,
    "enablePartitionEof": true,
    "fetchWaitMaxMs": 50,
    "partitionAssignmentStrategy": "RoundRobin",
    "autoOffsetReset": "earliest",
    "isolationLevel": "ReadUncommitted",
    "topics": {
      "connector-config-topic": { "purpose": "config" },
      "__kafka_connect_dotnet_command": { "purpose": "command" }
    },
    "schemaRegistry": {
      "connectionTimeoutMs": 5000,
      "maxCachedSchemas": 10,
      "url": "http://schema-registry:8081"
    },
    "healthCheck": {
      "disabled": false,
      "initialDelayMs": 10000,
      "periodicDelayMs": 30000
    },
    "failOver": {
      "disabled": false,
      "failureThreshold": 3,
      "initialDelayMs": 600,
      "periodicDelayMs": 20000,
      "restartDelayMs": 20000
    },
    "restarts": {
      "enabled": "Worker,Connector",
      "attempts": 5,
      "periodicDelayMs": 500,
      "stopOnFailure": true
    },
    "faultTolerance": {
      "batches": {
        "size": 10,
        "parallelism": 1,
        "interval": 5000,
        "poll": 1000
      },
      "retries": {
        "attempts": 3,
        "interval": 1000
      },
      "errors": {
        "tolerance": "All"
      },
      "eof": {
        "enabled": false
      }
    },
    "converters": {
      "key": "Kafka.Connect.Converters.JsonConverter",
      "value": "Kafka.Connect.Converters.JsonConverter"
    },
    "plugins": {
      "location": "/app/plugins/",
      "initializers": {
        "default-mongodb": {
          "prefix": "mongodb",
          "assembly": "Kafka.Connect.MongoDb.dll",
          "class": "Kafka.Connect.MongoDb.DefaultPluginInitializer"
        },
        "default-postgres": {
          "prefix": "postgres",
          "assembly": "Kafka.Connect.Postgres.dll",
          "class": "Kafka.Connect.Postgres.DefaultPluginInitializer"
        },
        "default-sqlserver": {
          "prefix": "sqlserver",
          "assembly": "Kafka.Connect.SqlServer.dll",
          "class": "Kafka.Connect.SqlServer.DefaultPluginInitializer"
        },
        "default-mysql": {
          "prefix": "mysql",
          "assembly": "Kafka.Connect.MySql.dll",
          "class": "Kafka.Connect.MySql.DefaultPluginInitializer"
        },
        "default-mariadb": {
          "prefix": "mariadb",
          "assembly": "Kafka.Connect.MariaDb.dll",
          "class": "Kafka.Connect.MariaDb.DefaultPluginInitializer"
        }
      }
    },
    "settings": "/app/configurations/",
    "connectors": {
      "test-mongodb-source": {
        "type": "source",
        "groupId": "test-mongodb-source-group",
        "topics": [],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "source",
          "name": "default-mongodb",
          "handler": "Kafka.Connect.MongoDb.MongoPluginHandler",
          "strategy": {
            "name": "Kafka.Connect.MongoDb.Strategies.ReadStrategy"
          },
          "properties": {
            "connectionString": "mongodb://admin:admin123@mongodb:27017/kafka_connect_test?authSource=admin",
            "database": "kafka_connect_test",
            "changelog": {
              "collection": "connect_audit_logs",
              "retention": 1
            },
            "commands": {
              "test-command": {
                "topic": "test-source-topic",
                "collection": "test_customers",
                "keys": ["_id"],
                "snapshot": {
                  "enabled": false,
                  "key": "_id",
                  "total": 0,
                  "id": 0
                }
              }
            }
          }
        }
      },
      "test-mongodb-sink": {
        "groupId": "test-mongodb-sink-group",
        "topics": ["test-sink-topic"],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "sink",
          "name": "default-mongodb",
          "handler": "Kafka.Connect.MongoDb.MongoPluginHandler",
          "strategy": {
            "selector": "Kafka.Connect.MongoDb.Strategies.UpsertStrategy"
          },
          "properties": {
            "connectionString": "mongodb://admin:admin123@mongodb:27017/kafka_connect_test?authSource=admin",
            "database": "kafka_connect_test",
            "collection": "test_sink_customers",
            "filter": "_id={_id}"
          }
        }
      },
      "test-postgres-source": {
        "type": "source",
        "groupId": "test-postgres-source-group",
        "topics": [],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "source",
          "name": "default-postgres",
          "handler": "Kafka.Connect.Postgres.PostgresPluginHandler",
          "strategy": {
            "name": "Kafka.Connect.Postgres.Strategies.ReadStrategy"
          },
          "properties": {
            "host": "postgres",
            "password": "postgres123",
            "userId": "postgres",
            "database": "kafka_connect_test",
            "changelog": {
              "table": "connect_audit_logs",
              "retention": 1
            },
            "commands": {
              "test-command": {
                "topic": "test-source-topic",
                "table": "test_customers",
                "schema": "public",
                "keys": ["id"],
                "snapshot": {
                  "enabled": false,
                  "key": "id",
                  "total": 0,
                  "id": 0
                }
              }
            }
          }
        }
      },
      "test-postgres-sink": {
        "groupId": "test-postgres-sink-group",
        "topics": ["test-sink-topic"],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "sink",
          "name": "default-postgres",
          "handler": "Kafka.Connect.Postgres.PostgresPluginHandler",
          "strategy": {
            "selector": "Kafka.Connect.Postgres.Strategies.ChangelogStrategySelector"
          },
          "properties": {
            "host": "postgres",
            "password": "postgres123",
            "userId": "postgres",
            "database": "kafka_connect_test",
            "table": "test_sink_customers",
            "schema": "public",
            "filter": "id={id}"
          }
        }
      },
      "test-mysql-source": {
        "type": "source",
        "groupId": "test-mysql-source-group",
        "topics": [],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "source",
          "name": "default-mysql",
          "handler": "Kafka.Connect.MySql.MySqlPluginHandler",
          "strategy": {
            "name": "Kafka.Connect.MySql.Strategies.ReadStrategy"
          },
          "properties": {
            "host": "mysql",
            "port": 3306,
            "userId": "kafka_connect",
            "password": "kafka_connect123",
            "database": "kafka_connect_test",
            "changelog": {
              "table": "connect_audit_logs",
              "retention": 1
            },
            "commands": {
              "test-command": {
                "topic": "test-source-topic",
                "table": "test_customers",
                "keys": ["id"],
                "snapshot": {
                  "enabled": false,
                  "key": "id",
                  "total": 0,
                  "id": 0
                }
              }
            }
          }
        }
      },
      "test-mysql-sink": {
        "groupId": "test-mysql-sink-group",
        "topics": ["test-sink-topic"],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "sink",
          "name": "default-mysql",
          "handler": "Kafka.Connect.MySql.MySqlPluginHandler",
          "strategy": {
            "selector": "Kafka.Connect.MySql.Strategies.ChangelogStrategySelector"
          },
          "properties": {
            "host": "mysql",
            "port": 3306,
            "userId": "kafka_connect",
            "password": "kafka_connect123",
            "database": "kafka_connect_test",
            "table": "test_sink_customers",
            "filter": "id={id}"
          }
        }
      },
      "test-mariadb-source": {
        "type": "source",
        "groupId": "test-mariadb-source-group",
        "topics": [],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "source",
          "name": "default-mariadb",
          "handler": "Kafka.Connect.MariaDb.MariaDbPluginHandler",
          "strategy": {
            "name": "Kafka.Connect.MariaDb.Strategies.ReadStrategy"
          },
          "properties": {
            "host": "mariadb",
            "port": 3306,
            "userId": "kafka_connect",
            "password": "kafka_connect123",
            "database": "kafka_connect_test",
            "changelog": {
              "table": "connect_audit_logs",
              "retention": 1
            },
            "commands": {
              "test-command": {
                "topic": "test-source-topic",
                "table": "test_customers",
                "keys": ["id"],
                "snapshot": {
                  "enabled": false,
                  "key": "id",
                  "total": 0,
                  "id": 0
                }
              }
            }
          }
        }
      },
      "test-mariadb-sink": {
        "groupId": "test-mariadb-sink-group",
        "topics": ["test-sink-topic"],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "sink",
          "name": "default-mariadb",
          "handler": "Kafka.Connect.MariaDb.MariaDbPluginHandler",
          "strategy": {
            "selector": "Kafka.Connect.MariaDb.Strategies.ChangelogStrategySelector"
          },
          "properties": {
            "host": "mariadb",
            "port": 3306,
            "userId": "kafka_connect",
            "password": "kafka_connect123",
            "database": "kafka_connect_test",
            "table": "test_sink_customers",
            "filter": "id={id}"
          }
        }
      },
      "test-sqlserver-source": {
        "type": "source",
        "groupId": "test-sqlserver-source-group",
        "topics": [],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "source",
          "name": "default-sqlserver",
          "handler": "Kafka.Connect.SqlServer.SqlServerPluginHandler",
          "strategy": {
            "name": "Kafka.Connect.SqlServer.Strategies.ReadStrategy"
          },
          "properties": {
            "server": "sqlserver",
            "userId": "sa",
            "password": "Password123!",
            "database": "kafka_connect_test",
            "changelog": {
              "table": "connect_audit_logs",
              "retention": 1
            },
            "commands": {
              "test-command": {
                "topic": "test-source-topic",
                "table": "test_customers",
                "schema": "dbo",
                "keys": ["id"],
                "snapshot": {
                  "enabled": false,
                  "key": "id",
                  "total": 0,
                  "id": 0
                }
              }
            }
          }
        }
      },
      "test-sqlserver-sink": {
        "groupId": "test-sqlserver-sink-group",
        "topics": ["test-sink-topic"],
        "tasks": 1,
        "paused": false,
        "disabled": false,
        "plugin": {
          "type": "sink",
          "name": "default-sqlserver",
          "handler": "Kafka.Connect.SqlServer.SqlServerPluginHandler",
          "strategy": {
            "selector": "Kafka.Connect.SqlServer.Strategies.ChangelogStrategySelector"
          },
          "properties": {
            "server": "sqlserver",
            "userId": "sa",
            "password": "Password123!",
            "database": "kafka_connect_test",
            "table": "test_sink_customers",
            "schema": "dbo",
            "filter": "id={id}"
          }
        }
      }
    }
  }
}